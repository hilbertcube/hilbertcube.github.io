---
/**
 * src/pages/test/github.astro
 * ============================
 * GitHub Contributions test page — migrated from /test/github.html
 * Standalone page (no shared layout — uses its own styles/scripts).
 */
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GitHub Contributions</title>
    <style is:inline>
      .contributions-container {
        max-width: 800px;
        margin: 0 auto;
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial,
          sans-serif;
      }
      .contribution-graph {
        display: grid;
        grid-template-columns: repeat(53, 1fr);
        grid-gap: 3px;
      }
      .contribution-cell {
        width: 10px;
        height: 10px;
        border-radius: 2px;
      }
      .contribution-legend {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        margin-top: 10px;
        font-size: 12px;
      }
      .legend-item {
        display: flex;
        align-items: center;
        margin-left: 8px;
      }
      .legend-color {
        width: 10px;
        height: 10px;
        border-radius: 2px;
        margin-right: 4px;
      }
    </style>
  </head>
  <body>
    <main>
      <div class="contributions-container">
        <h2>GitHub Contributions</h2>
        <div id="contribution-graph" class="contribution-graph"></div>
        <div class="contribution-legend">
          <span>Less</span>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #ebedf0;"></div>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #9be9a8;"></div>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #40c463;"></div>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #30a14e;"></div>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #216e39;"></div>
          </div>
          <span>More</span>
        </div>
      </div>
    </main>

    <script is:inline>
      document.addEventListener("DOMContentLoaded", function () {
        const username = "hilbertcube";

        createMockContributionGraph();

        function createMockContributionGraph() {
          const graphContainer = document.getElementById("contribution-graph");
          const totalDays = 52 * 7;
          const levels = [0, 1, 2, 3, 4];
          const colors = [
            "#ebedf0",
            "#9be9a8",
            "#40c463",
            "#30a14e",
            "#216e39",
          ];

          for (let i = 0; i < totalDays; i++) {
            const randomLevel = Math.floor(Math.random() * levels.length);
            const cell = document.createElement("div");
            cell.className = "contribution-cell";
            cell.style.backgroundColor = colors[randomLevel];
            cell.title = `${randomLevel} contributions`;
            graphContainer.appendChild(cell);
          }
        }

        fetchContributions(username);
      });
    </script>
  </body>
</html>
